{% extends "core/base.html" %}
{% block mainContent%}
<h3>{{le_user.getUserInfo.screenName}}</h3>
<hr>

<div class="row-fluid">
	<div class="span2">
	  	<img src="{{le_user.gravatar_url_big}}"/><br>
	  	Since {{le_user.date_joined|date:"N j, o"}}<br>
	  	<a href="/core/user/{{le_user.id}}/history" style="text-align:center">User history</a>
	</div>

	<div class="span8">
		<div class="row-fluid">
			<div class="span6">
				<table>
					<tr>
						<td>Screen name:</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>{{le_user.getUserInfo.screenName}}</td>
					</tr>
					<tr>
						<td>Real name:</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>{{le_user.getUserInfo.realName}}</td>
					</tr>
					{% if le_user.getUserInfo.website %}
					<tr>
						<td>website</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td><a target="_userwebsite" href="{{le_user.getUserInfo.get_website_url}}">{{le_user.getUserInfo.website}}</td>
					</tr>
					{% endif %}
				</table>

				<br><br>
				<div class="well">
					<h4>User stats</h4>
					<table class="table table-condensed table-striped">
						<caption> sponsoring </caption>
						<tr>
							<th>open</th><th>revoked</th><th>paid</th>
						</tr>
						<tr>
							<td>
								{{stats.sponsoredOpenCount}}
								{% if stats.sponsoredOpenCount %}
							 		/ US$ {{stats.sponsoredOpenPrice|floatformat:2}}
							 	{% endif %}
							</td>
							<td>
								{{stats.sponsoredRevokedCount}}
								{% if stats.sponsoredRevokedCount %}
									/ US$ {{stats.sponsoredRevokedPrice|floatformat:2}}
								{% endif %}
							</td>
							<td>
								{{stats.sponsoredPaidCount}}
								{% if stats.sponsoredPaidCount %}
									/ US$ {{stats.sponsoredPaidPrice|floatformat:2}}
								{% endif %}
							</td>
						</tr>
					</table>
					<table class="table table-condensed table-striped">
						<caption> working </caption>
						<tr>
							<th>in progress</th><th>aborted</th><th>resolved</th>
						</tr>
						<tr>
							<td>{{stats.workingInProgressCount}}</td>
							<td>{{stats.workingAbortedCount}}</td>
							<td>{{stats.workingDoneCount}}</td>
						</tr>
					</table>
				</div>
			</div>
			<div class="span6">
				About {{le_user.getUserInfo.screenName}}
				<div class="alert alert-info">
				    {% load markdown %}
				    {% autoescape off %}
					{{le_user.getUserInfo.about|markdown}}
				    {% endautoescape %}
				</div>
				<div class="row-fluid">
					<div class="span12">
						<div>
							connected accounts
						</div>
						{% for auth in le_user.getSocialAuths %}
						{% if auth.getSocialIcon %}
							{% if auth.getSocialProfileLink %}
							<div class="span1" style="border:1px solid #DDD; height:60px; width:110px; margin:3px; text-align:center; display:block"><a style="margin-top:18px; display:block" href="{{auth.getSocialProfileLink}}" target="_{{auth.provider}}"><img src="{{auth.getSocialIcon}}"></a></div>
							{% else %}
							<div class="span1" style="border:1px solid #DDD; height:60px; width:110px; margin:3px; text-align:center; display:block"><span style="margin-top:18px; display:block"><img src="{{auth.getSocialIcon}}"></span></div>
							{% endif %}
						{% endif %}
						{% endfor %}
					</div>
				</div>
				{% if le_user.id == user.id %}
				<div class="row-fluid">
					<div class="span12">
						<div>
							Connect accounts
						</div>
						<div class="row-fluid">
							<div class="span12">
								{% for acc in unconnectedSocialAccounts %}
								<div class="span1" style="border:1px solid #DDD; height:60px; width:110px; margin:3px; text-align:center; display:block"><a style="margin-top:18px; display:block" href="/login/{{acc.provider}}?next={{user.get_view_link}}"><img src="{{acc.icon}}"></a></div>
								{% endfor %}
							</div>
						</div>
					</div>
				</div>
				{% endif %}
			</div>
		</div>
	</div>
</div>
{% endblock mainContent%}